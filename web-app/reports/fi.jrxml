<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="op" language="groovy" pageWidth="595" pageHeight="842" columnWidth="589" leftMargin="3" rightMargin="3" topMargin="20" bottomMargin="20" uuid="8a7719ce-943e-4e58-bcc4-17a1c4039d85">
	<property name="ireport.zoom" value="1.1289478601075555"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#FFBFBF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TH" mode="Opaque" backcolor="#FFFFF0">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_CH" mode="Opaque" backcolor="#FFFFBF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_TH" mode="Opaque" backcolor="#BFBFD5">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_CH" mode="Opaque" backcolor="#E6E6FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 8">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 8_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 8_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 8_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="Movimientos" uuid="481ed7f6-caa6-4ba4-b893-77fbc12418c9">
		<parameter name="movement_id_m" class="java.lang.Long" isForPrompting="false"/>
		<queryString>
			<![CDATA[select mi.movement_id,w.code as work_from,w2.code as work_to,c.code as concept_code,mi.description,uom.name,mi.quantity,mi.unit_price,mi.total
from movement_item mi
left join movement_item mi2 on mi.items_idx + 1 = mi2.items_idx
left join work w on mi.work_id = w.id
left join work w2 on mi2.work_id = w2.id
left join concept c on mi.concept_id = c.id
left join unit_of_measurement uom on mi.unit_id = uom.id
where mi.movement_id = $P{movement_id_m} and mi2.movement_id = $P{movement_id_m}
and mi.items_idx % 2 = 0]]>
		</queryString>
		<field name="movement_id" class="java.lang.Long">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="work_from" class="java.lang.Long"/>
		<field name="work_to" class="java.lang.Long"/>
		<field name="concept_code" class="java.lang.String"/>
		<field name="description" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="name" class="java.lang.String">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="quantity" class="java.math.BigDecimal">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="unit_price" class="java.math.BigDecimal">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<field name="total" class="java.math.BigDecimal">
			<fieldDescription><![CDATA[]]></fieldDescription>
		</field>
		<variable name="total_tot" class="java.math.BigDecimal" resetType="Group" resetGroup="movement_id" incrementType="Group" incrementGroup="movement_id" calculation="Sum">
			<variableExpression><![CDATA[$V{total_tot} + $F{total}]]></variableExpression>
			<initialValueExpression><![CDATA[0]]></initialValueExpression>
		</variable>
		<group name="movement_id">
			<groupExpression><![CDATA[$F{movement_id}]]></groupExpression>
		</group>
	</subDataset>
	<parameter name="movement_id" class="java.lang.Long">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select m.id,m.number,m.year,m.date_created
from movement m where m.id = $P{movement_id}]]>
	</queryString>
	<field name="id" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="number" class="java.lang.Long">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="year" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="date_created" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="79" splitType="Stretch">
			<image>
				<reportElement x="58" y="0" width="134" height="31" uuid="fa573d39-20fe-489d-a6f0-21a2b9b89fe4"/>
				<imageExpression><![CDATA["http://localhost:8080/urbatec/images/Logo%20Urbatec.jpg"]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="219" y="31" width="142" height="20" uuid="21804eb7-8644-45d3-97fa-3e3e04dea779"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[FACTURA INTERNA]]></text>
			</staticText>
			<staticText>
				<reportElement x="419" y="0" width="50" height="20" uuid="b1693f85-820b-4970-96ff-4318ed7834b7"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[FI NÂ°:]]></text>
			</staticText>
			<staticText>
				<reportElement x="419" y="20" width="50" height="20" uuid="40dc0a0f-85e0-4c83-b4c7-ed0c9e973ee2"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha:]]></text>
			</staticText>
			<textField>
				<reportElement x="474" y="0" width="93" height="20" uuid="285fbadf-9481-4740-82e1-083f5e27d9ed"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{number}+" / "+$F{year}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="474" y="20" width="93" height="20" uuid="8de7cf2e-ef5f-4d2c-a83a-0e7941ce7231"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{date_created}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="47" splitType="Stretch">
			<componentElement>
				<reportElement key="table 8" style="table 8" stretchType="RelativeToBandHeight" mode="Opaque" x="58" y="0" width="518" height="36" uuid="ad86ae8d-8169-45df-99f4-220375761d62"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="Movimientos" uuid="f5d585de-304c-413a-a75d-a001766506c8">
						<datasetParameter name="movement_id_m">
							<datasetParameterExpression><![CDATA[$P{movement_id}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="42" uuid="c04523c4-87c1-4023-9834-9eaeb737e419">
						<jr:groupFooter groupName="movement_id">
							<jr:cell style="table 8_TH" height="22" rowSpan="1"/>
						</jr:groupFooter>
						<jr:columnHeader style="table 8_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="42" height="30" uuid="d13a1658-0c0c-4932-972d-7890c65831ac"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<text><![CDATA[Obra origen]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 8_TD" height="20" rowSpan="1">
							<textField isBlankWhenNull="true">
								<reportElement x="0" y="0" width="42" height="20" uuid="b585b5c5-ec3c-402d-9456-aea37d2f054a"/>
								<textElement verticalAlignment="Middle">
									<font size="8"/>
									<paragraph firstLineIndent="1"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{work_from}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="42" uuid="8bb07ce7-c0f3-4725-b4ca-7875aaf7479b">
						<jr:groupFooter groupName="movement_id">
							<jr:cell style="table 8_TH" height="22" rowSpan="1"/>
						</jr:groupFooter>
						<jr:columnHeader style="table 8_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="42" height="30" uuid="debd8a0d-6277-42d4-9663-6197f6c8c78e"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<text><![CDATA[Obra destino]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 8_TD" height="20" rowSpan="1">
							<textField isBlankWhenNull="true">
								<reportElement x="0" y="0" width="42" height="20" uuid="de7cacd7-5d74-4a9d-be26-84a7cf738561"/>
								<textElement verticalAlignment="Middle">
									<font size="8"/>
									<paragraph firstLineIndent="1"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{work_to}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="39" uuid="d2f5e60c-7f3a-493b-a0b0-ece395778a8d">
						<jr:groupFooter groupName="movement_id">
							<jr:cell style="table 8_TH" height="22" rowSpan="1"/>
						</jr:groupFooter>
						<jr:columnHeader style="table 8_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="38" height="30" uuid="a265a261-0186-4ab6-ae5e-da88d5a8d79e"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<text><![CDATA[CÃ³digo gasto]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 8_TD" height="20" rowSpan="1">
							<textField isBlankWhenNull="true">
								<reportElement x="0" y="0" width="38" height="20" uuid="5fc270ba-c393-4186-9727-b91f1586d4d9"/>
								<textElement verticalAlignment="Middle">
									<font size="8"/>
									<paragraph firstLineIndent="1"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{concept_code}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="165" uuid="33dd3861-7cee-43b6-87ac-66ccd4adcea4">
						<jr:groupFooter groupName="movement_id">
							<jr:cell style="table 8_TH" height="22" rowSpan="1"/>
						</jr:groupFooter>
						<jr:columnHeader style="table 8_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="165" height="30" uuid="a539ea10-845a-4ce2-84b6-735e794f4fad"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<text><![CDATA[DescripciÃ³n]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 8_TD" height="20" rowSpan="1">
							<textField isStretchWithOverflow="true" isBlankWhenNull="true">
								<reportElement x="0" y="0" width="165" height="20" uuid="113e2c0f-f30a-4e3d-9f1b-e25d46a26b17"/>
								<textElement verticalAlignment="Middle">
									<font size="8"/>
									<paragraph firstLineIndent="1"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{description}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="32" uuid="192e8ed4-6ce7-4710-abec-17ffbd003c48">
						<jr:groupFooter groupName="movement_id">
							<jr:cell style="table 8_TH" height="22" rowSpan="1"/>
						</jr:groupFooter>
						<jr:columnHeader style="table 8_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="32" height="30" uuid="ac05222d-dc2f-435d-96a9-31a907d60a82"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<text><![CDATA[Unidad]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 8_TD" height="20" rowSpan="1">
							<textField isBlankWhenNull="true">
								<reportElement x="0" y="0" width="32" height="20" uuid="bc465473-ade0-47ae-9c32-11016f1a47b6"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
									<paragraph firstLineIndent="1"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="47" uuid="c225b52d-713b-4547-b8bb-a60d9f743703">
						<jr:groupFooter groupName="movement_id">
							<jr:cell style="table 8_TH" height="22" rowSpan="1"/>
						</jr:groupFooter>
						<jr:columnHeader style="table 8_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="47" height="30" uuid="68cb97ae-b36a-46ec-b3e2-79995c294871"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<text><![CDATA[Cantidad]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 8_TD" height="20" rowSpan="1">
							<textField pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement x="0" y="0" width="47" height="20" uuid="13d5c008-fd3e-442a-a2a9-1771b1150784"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{quantity}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="59" uuid="4493d2c4-3482-4b18-bb61-41bc62a8d8b1">
						<jr:groupFooter groupName="movement_id">
							<jr:cell style="table 8_TH" height="22" rowSpan="1">
								<staticText>
									<reportElement x="0" y="1" width="59" height="20" uuid="f8a41188-5bb2-4063-8b6a-cd9d38e2e456"/>
									<textElement textAlignment="Center" verticalAlignment="Middle">
										<font size="8" isBold="true"/>
									</textElement>
									<text><![CDATA[Total]]></text>
								</staticText>
							</jr:cell>
						</jr:groupFooter>
						<jr:columnHeader style="table 8_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="59" height="30" uuid="2ad08a41-b2df-4f64-8a3c-4acdfeb640d8"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<text><![CDATA[Precio unitario]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 8_TD" height="20" rowSpan="1">
							<textField pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement x="0" y="0" width="58" height="20" uuid="c09ed09f-43ed-4314-b236-88ab2aaa701d"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{unit_price}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="91" uuid="b1ebdb2b-eb38-4291-9bdf-961f23404089">
						<jr:groupFooter groupName="movement_id">
							<jr:cell style="table 8_TH" height="22" rowSpan="1">
								<textField pattern="#,##0.00">
									<reportElement x="0" y="1" width="90" height="20" uuid="4a256ce3-a4ff-42c5-af39-3ccf9503cde3"/>
									<textElement textAlignment="Right" verticalAlignment="Middle">
										<font size="8" isBold="true" isItalic="false"/>
									</textElement>
									<textFieldExpression><![CDATA[$V{total_tot}]]></textFieldExpression>
								</textField>
							</jr:cell>
						</jr:groupFooter>
						<jr:columnHeader style="table 8_CH" height="30" rowSpan="1">
							<staticText>
								<reportElement x="0" y="0" width="91" height="30" uuid="f0d627c2-94bc-4453-8b6a-a73455656aa3"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<text><![CDATA[Precio total]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 8_TD" height="20" rowSpan="1">
							<textField pattern="#,##0.00" isBlankWhenNull="true">
								<reportElement x="0" y="0" width="90" height="20" uuid="e0cef64a-57e8-40b3-8234-98debc3ebd6f"/>
								<textElement textAlignment="Right" verticalAlignment="Middle">
									<font size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<summary>
		<band height="123" splitType="Stretch">
			<line>
				<reportElement x="348" y="85" width="186" height="1" uuid="c9d680ee-45e1-4d3d-a752-edf8521ab817"/>
			</line>
			<staticText>
				<reportElement x="348" y="85" width="186" height="20" uuid="351fca3e-8156-40ee-a53d-ebb0e842523b"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[AUTORIZÃ]]></text>
			</staticText>
			<staticText>
				<reportElement x="58" y="85" width="186" height="20" uuid="c23f5861-1713-48e5-9133-f7ad2b81eff2"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[OK]]></text>
			</staticText>
			<line>
				<reportElement x="58" y="85" width="186" height="1" uuid="48db7c44-25e4-4973-b69a-3948eea7c2ec"/>
			</line>
		</band>
	</summary>
</jasperReport>
